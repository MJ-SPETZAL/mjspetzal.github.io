<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HANGED MAN - SYSTEM_LOGIN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;900&family=Share+Tech+Mono&display=swap');
        
        body { font-family: 'Inter', sans-serif; background-color: #f7f9fb; margin: 0; overflow: hidden; }
        .hangman-part { fill: none; stroke: #2c3e50; stroke-width: 4; stroke-linecap: round; }
        #keyboard { display: flex; flex-direction: column; gap: 4px; padding: 12px; background-color: #f9fafb; border-radius: 8px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .key-row { display: flex; justify-content: center; gap: 4px; }
        .key-button { flex-grow: 1; padding: 8px 12px; font-size: 14px; font-weight: bold; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); transition: all 0.15s; }
        #game-container { background: linear-gradient(145deg, #ffffff, #f0f4f8); }

        /* --- ARG演出：ターミナルスタイル --- */
        #arg-curtain {
            position: fixed; top: 0; left: 0; width: 100%; height: 0;
            background-color: black; transition: height 1.5s ease-in-out;
            z-index: 9998; pointer-events: none;
        }
        #arg-curtain.active { height: 100vh; pointer-events: all; }

        #arg-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background-color: black; color: #00FF00;
            display: none; z-index: 9999;
            flex-direction: column; justify-content: center; align-items: center;
            font-family: 'Share Tech Mono', monospace; padding: 20px;
        }

        #terminal-box { width: 100%; max-width: 600px; text-align: left; }
        .glitch-text { font-size: 1.2rem; line-height: 1.5; color: #0f0; min-height: 3em; word-break: break-all; }
        
        /* ログイン入力欄 */
        #login-form { display: none; margin-top: 20px; border-top: 1px solid #060; padding-top: 20px; }
        #login-input {
            background: transparent; border: none; color: #0f0; outline: none;
            font-size: 1.5rem; width: 100%; font-family: inherit;
        }
        .cursor { display: inline-block; width: 10px; height: 1.2em; background: #0f0; animation: blink 1s infinite; vertical-align: middle; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        .hidden { display: none; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div id="game-container" class="w-full max-w-xl shadow-2xl rounded-xl p-6 md:p-8 space-y-6">
        <h1 class="text-3xl font-extrabold text-gray-800 text-center border-b-4 border-indigo-500 pb-3">HANGED MAN</h1>
        <div id="word-display" class="text-4xl font-mono tracking-widest text-center text-indigo-700 p-4 bg-indigo-50 rounded-lg"></div>
        <div id="keyboard" class="mt-4"></div>
        <p class="text-center text-gray-400 text-xs mt-4">TYPE THE SECRET KEY TO ESCAPE THE ARCHIVE</p>
    </div>

    <div id="arg-curtain"></div>
    <div id="arg-screen">
        <div id="terminal-box">
            <div id="glitch-area" class="glitch-text"></div>
            
            <div id="login-form">
                <p class="mb-2">SYSTEM_ARCHIVE_LOGIN</p>
                <div class="flex items-center border-b border-green-900 pb-2">
                    <span class="mr-2">></span>
                    <input type="password" id="login-input" autocomplete="off" placeholder="PASSWORD REQUIRED">
                    <span class="cursor"></span>
                </div>
                <p id="auth-status" class="mt-4 text-sm"></p>
                
                <div id="success-content" class="hidden mt-6 p-4 border border-green-500 bg-green-900/20">
                    <p class="text-xl font-bold mb-2">ACCESS GRANTED.</p>
                    <p>次の目的地：https://(あなたのURL).github.io/next-step</p>
                    <p class="text-xs mt-2">※この座標を忘れるな。</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 基本設定 ---
        const SECRET_KEY = "READY"; // 幕を下ろすためのコマンド
        const FINAL_PASSWORD = "25E"; // ログイン画面の正解パスワード (例: 純也さんのIDの一部など)
        let inputBuffer = "";

        // ハングマンの簡易ロジック
        const words = ["ECONOMY", "LOGIC", "READY", "PLAYER", "SYSTEM"];
        let secretWord = words[Math.floor(Math.random() * words.length)];
        const wordDisplay = document.getElementById('word-display');
        wordDisplay.textContent = "_".repeat(secretWord.length);

        // --- ARG演出ロジック ---

        function triggerArgSequence() {
            document.getElementById('arg-curtain').classList.add('active');
            setTimeout(() => {
                document.getElementById('arg-screen').style.display = 'flex';
                startGlitchTyping();
            }, 1500);
        }

        // バラバラな文字列が打たれる演出
        function startGlitchTyping() {
            const area = document.getElementById('glitch-area');
            const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()_+{}[]|;:,.<>?/";
            let iterations = 0;
            
            const interval = setInterval(() => {
                let randomStr = "";
                for(let i=0; i<60; i++) {
                    randomStr += chars[Math.floor(Math.random() * chars.length)];
                }
                area.innerText = randomStr;
                iterations++;

                if (iterations > 30) {
                    clearInterval(interval);
                    area.innerText = "CRITICAL ERROR: UNAUTHORIZED ACCESS DETECTED.\nBOOTING LOGIN_PROTOCOL...";
                    setTimeout(() => {
                        area.classList.add('text-green-800'); // 文字を少し暗くしてログインを目立たせる
                        document.getElementById('login-form').style.display = 'block';
                        document.getElementById('login-input').focus();
                    }, 1000);
                }
            }, 60);
        }

        // ログイン判定
        document.getElementById('login-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const val = this.value.toUpperCase();
                const status = document.getElementById('auth-status');
                if (val === FINAL_PASSWORD) {
                    status.innerText = "AUTHENTICATING...";
                    setTimeout(() => {
                        status.innerText = "";
                        document.getElementById('success-content').classList.remove('hidden');
                        this.style.display = 'none';
                        document.querySelector('.cursor').style.display = 'none';
                    }, 1500);
                } else {
                    status.innerText = "INVALID PASSWORD. TRY AGAIN.";
                    this.value = "";
                }
            }
        });

        // キー入力監視
        document.addEventListener('keydown', (e) => {
            if (document.activeElement.id === 'login-input') return; // ログイン入力中は無視
            
            const key = e.key.toUpperCase();
            inputBuffer += key;
            if (inputBuffer.endsWith(SECRET_KEY)) {
                triggerArgSequence();
            }
            if (inputBuffer.length > 20) inputBuffer = inputBuffer.substring(10);
        });
    </script>
</body>
</html>
